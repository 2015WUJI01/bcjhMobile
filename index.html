<!DOCTYPE html>
<html lang="ch">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>图鉴</title>
  <link rel="icon" href="./favicon.ico">
  <link rel="stylesheet" href="./ele/index.css">
  <link rel="stylesheet" href="./css/index.css">
</head>
<body>
  <div id="main">
    <aside>
      <el-drawer class="left-bar" :visible.sync="leftBar" direction="ltr" size="240px" :with-header="false">
        <div class="header">
          <img class="img-header" src="./images/saltFish.png" alt="咸公主">
          <div class="title">白菜菊花图鉴</div>
          <div class="sub-title">by 小鱼、L</div>
        </div>
        <div class="body">
          <div class="nav" v-for="item in nav" :class="item.id === navId ? 'active' : '' " @click="checkNav(item.id)">
            <i :class="item.icon"></i>
            {{item.name}}
          </div>
        </div>
      </el-drawer>
      <el-drawer class="right-bar" :visible.sync="rightBar" size="295px" :with-header="false">
        <div class="right-bar-body">
          <div v-if="navId === 1">
            <div class="box">
              <div class="box-title">展示列</div>
              <div class="hr"></div>
              <span class="checkbox" @click="selectAll('repCol')">全选</span>
              <span
                v-for="(val, key) in repColName"
                class="checkbox"
                :class="repCol[key] ? 'active' : ''"
                @click="repCol[key] = !repCol[key]"
              >{{val}}</span>
            </div>
            <div class="box">
              <div class="box-title">筛选</div>
              <div class="hr"></div>
              <div class="checkbox-contain">
                <span
                  class="checkbox"
                  v-for="(val, key) in repFilter.rarity"
                  :class="val ? 'active' : ''"
                  @click="repFilter.rarity[key] = !val"
                >{{key}}星</span>
              </div>
              <div class="checkbox-contain">
                <span
                  class="checkbox"
                  v-for="(val, key) in repFilter.skill"
                  :class="val.flag ? 'active' : ''"
                  @click="checkSkill(key)"
                >{{val.name}}</span>
                <br/>
                <span class="checkbox" @click="selectAll('repFilter.skill')">全选</span>
                <el-switch
                  v-model="skill_radio"
                  active-color="#82a1b0"
                  active-text="单选"
                  @change="changeSkillRadio"
                  inactive-color="#ddd">
                </el-switch>
                <el-switch
                  v-model="skill_type"
                  active-color="#82a1b0"
                  active-text="同时"
                  @change="changeSkillType"
                  inactive-color="#ddd">
                </el-switch>
              </div>
              <div class="checkbox-contain">
                <span
                  class="checkbox"
                  v-for="(val, key) in repFilter.material"
                  :class="val.flag ? 'active' : ''"
                  @click="repFilter.material[key].flag = !val.flag"
                >{{val.name}}</span>
                <el-switch
                  v-model="repFilter.material_type"
                  active-color="#82a1b0"
                  active-text="同时"
                  inactive-color="#ddd">
                </el-switch>
              </div>
              <div class="checkbox-contain">
                <span
                  class="checkbox"
                  :class="repFilter.guest ? 'active' : ''"
                  @click="repFilter.guest = !repFilter.guest"
                >贵客</span>
              </div>
              <div class="checkbox-contain">
                <span
                  class="checkbox"
                  :class="repFilter.combo ? 'active' : ''"
                  @click="repFilter.combo = !repFilter.combo"
                >可合成</span>
              </div>
              <div class="checkbox-contain">
                <div class="prepend-input">
                  <div class="input-box">
                    <div class="prepend">单价大于</div>
                    <input v-model="repFilter.price" />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div v-if="navId === 2">
            <div class="box">
              <div class="box-title">展示列</div>
              <div class="hr"></div>
              <span class="checkbox" @click="selectAll('chefCol')">全选</span>
              <span
                v-for="(val, key) in chefColName"
                class="checkbox"
                :class="chefCol[key] ? 'active' : ''"
                @click="chefCol[key] = !chefCol[key]"
              >{{val}}</span>
            </div>
            <div class="box">
              <div class="box-title">筛选</div>
              <div class="hr"></div>
              <div class="checkbox-contain">
                <span
                  class="checkbox"
                  v-for="(val, key) in chefFilter.rarity"
                  :class="val ? 'active' : ''"
                  @click="chefFilter.rarity[key] = !val"
                >{{key}}星</span>
              </div>
              <div class="checkbox-contain">
                <!-- 不知道为什么抽屉的第一个input会自动获取焦点，奇奇怪怪的 -->
                <!-- 我在这里放一个看不见的input，不能是text类型否则手机会呼起软键盘 -->
                <input class="hidden" type="checkbox">
                <div class="prepend-input" v-for="(val, key) in chefFilter.skills" :key="key">
                  <div class="input-box">
                    <div class="prepend">{{val.name}}</div>
                    <input v-model="chefFilter.skills[key].val" />
                  </div>
                </div>
                <span class="checkbox clear" @click="clearFilterSkills">
                  清<br/>空
                </span>
              </div>
              <div class="checkbox-contain">
                <span
                  class="checkbox"
                  v-for="(val, key) in chefFilter.sex"
                  :class="val.flag ? 'active' : ''"
                  @click="chefFilter.sex[key].flag = !val.flag"
                >{{val.name}}</span>
              </div>
            </div>
          </div>
          <div v-if="navId === 3">
            <div class="box">
              <div class="box-title">展示列</div>
              <div class="hr"></div>
              <span class="checkbox" @click="selectAll('equipCol')">全选</span>
              <span
                v-for="(val, key) in equipColName"
                class="checkbox"
                :class="equipCol[key] ? 'active' : ''"
                @click="equipCol[key] = !equipCol[key]"
              >{{val}}</span>
            </div>
            <div class="box">
              <div class="box-title">筛选</div>
              <div class="hr"></div>
              <div class="checkbox-contain">
                <span
                  class="checkbox"
                  v-for="(val, key) in equipFilter.rarity"
                  :class="val ? 'active' : ''"
                  @click="equipFilter.rarity[key] = !val"
                >{{key}}星</span>
              </div>
              <div class="checkbox-contain">
                <span
                  class="checkbox"
                  v-for="(val, key) in equipFilter.skillType"
                  :class="val.flag ? 'active' : ''"
                  @click="checkSkillType(key)"
                >{{val.name}}</span>
                <span class="checkbox" @click="selectAll('equipFilter.skillType')">全选</span>
                <div style="margin-top: 10px;">
                  <el-switch
                    v-model="equip_radio"
                    active-color="#82a1b0"
                    active-text="单选"
                    @change="changeEquipRadio"
                    inactive-color="#ddd">
                  </el-switch>
                  <el-switch
                    v-model="equip_concurrent"
                    active-color="#82a1b0"
                    active-text="同时"
                    @change="changeEquipConcurrent"
                    inactive-color="#ddd">
                  </el-switch>
                  <el-switch
                    v-model="equipFilter.buff"
                    active-color="#82a1b0"
                    active-text="增益"
                    inactive-color="#ddd">
                  </el-switch>
                </div>
              </div>
            </div>
          </div>
          <footer v-show="isOriginHei">
            <button class="btn btn-primary" @click="rightBar = false">确定</button>
            <button class="btn btn-reset" @click="reset">清空过滤</button>
          </footer>
        </div>
      </el-drawer>
      <div v-if="navId < 6 && !hideSuspend" v-show="isOriginHei" class="suspend icon-btn" @click="rightBar = true">
        <i class="el-icon-search"></i>
      </div>
      <el-dialog
        top="200px"
        :show-close="false"
        :visible.sync="settingVisible"
        width="200px">
        <span>
          筛选按钮固定在顶栏
          <el-switch
            style="display: block"
            v-model="hideSuspend"
            active-color="#82a1b0"
            inactive-color="#ddd">
          </el-switch>
        </span>
      </el-dialog>
    </aside>
    <section class="header">
      <i class="icon-btn el-icon-s-operation" @click="leftBar = !leftBar"></i>
      <span class="right">
        <i class="icon-btn el-icon-s-tools" @click="settingVisible = true"></i>
        <i v-if="hideSuspend && navId < 6" class="icon-btn el-icon-search" style="margin-left: 6px;" @click="rightBar = true"></i>
      </span>
    </section>
    <section class="body">
      <div v-show="navId === 1">
        <div class="search-box">
          <el-row>
            <el-col :span="13">
              <el-input class="left" size="small" prefix-icon="el-icon-search" placeholder="菜名 材料 贵客 符文 来源" v-model="repKeyword">
              </el-input>
            </el-col>
            <el-col :span="11">
              <el-input size="small" prefix-icon="el-icon-search" placeholder="升阶贵客 神级符文" v-model="guestKeyword">
              </el-input>
            </el-col>
          </el-row>
        </div>
        <el-table
          :data="recipesPage"
          style="width: 100%"
          ref='recipesTable'
          class="sort"
          @sort-change="handleRepSort"
          :height="tableHeight">
          <el-table-column fixed sortable="custom" prop="galleryId" label="No." width="63" v-if="repCol.id"></el-table-column>
          <el-table-column fixed sortable="custom" prop="name" label="菜谱名" width="80"></el-table-column>
          <el-table-column sortable="custom" prop="rarity_show" label="星" min-width="75" v-if="repCol.rarity"></el-table-column>
          <el-table-column sortable="custom" prop="stirfry" label="炒" min-width="52" v-if="repCol.skills"></el-table-column>
          <el-table-column sortable="custom" prop="boil" label="煮" min-width="52" v-if="repCol.skills"></el-table-column>
          <el-table-column sortable="custom" prop="knife" label="切" min-width="52" v-if="repCol.skills"></el-table-column>
          <el-table-column sortable="custom" prop="fry" label="炸" min-width="52" v-if="repCol.skills"></el-table-column>
          <el-table-column sortable="custom" prop="bake" label="烤" min-width="52" v-if="repCol.skills"></el-table-column>
          <el-table-column sortable="custom" prop="steam" label="蒸" min-width="52" v-if="repCol.skills"></el-table-column>
          <el-table-column prop="materials_show" label="材料" min-width="130" v-if="repCol.materials"></el-table-column>
          <el-table-column sortable="custom" prop="price" min-width="68" label="单价" v-if="repCol.price"></el-table-column>
          <el-table-column prop="exPrice" min-width="50" label="熟练" v-if="repCol.exPrice"></el-table-column>
          <el-table-column sortable="custom" prop="time_show" min-width="80" label="单时间" v-if="repCol.time"></el-table-column>
          <el-table-column sortable="custom" prop="limit" min-width="67" label="一组" v-if="repCol.limit"></el-table-column>
          <el-table-column sortable="custom" prop="total_price" min-width="67" label="总价" v-if="repCol.total_price"></el-table-column>
          <el-table-column sortable="custom" prop="total_time_show" min-width="100" label="总时间" v-if="repCol.total_time_show"></el-table-column>
          <el-table-column sortable="custom" prop="gold_eff" label="金币/小时" min-width="100" v-if="repCol.gold_eff"></el-table-column>
          <el-table-column sortable="custom" prop="material_eff" label="耗材/小时" min-width="100" v-if="repCol.material_eff"></el-table-column>
          <el-table-column sortable="custom" prop="origin" label="来源" min-width="100" v-if="repCol.origin"></el-table-column>
          <el-table-column sortable="custom" prop="unlock" label="可解锁" v-if="repCol.unlock"></el-table-column>
          <el-table-column sortable="custom" prop="combo" min-width="80" label="可合成" v-if="repCol.combo"></el-table-column>
          <el-table-column sortable="custom" prop="normal_guests" min-width="125" label="贵客" v-if="repCol.guests"></el-table-column>
          <el-table-column prop="degree_guests" label="升阶贵客" min-width="110" v-if="repCol.degree_guests"></el-table-column>
          <el-table-column sortable="custom" prop="gift" label="神级符文" min-width="95" v-if="repCol.gift"></el-table-column>
          <el-table-column label="" min-width="1"></el-table-column>
        </el-table>
        <div class="pagination">
          <el-pagination
            background
            small
            :page-size="recipesPageSize"
            :current-page.sync="recipesCurPage"
            @current-change="handleCurrentChange"
            :pager-count="5"
            layout="total, prev, pager, next"
            :total="recipes.length">
          </el-pagination>
        </div>
      </div>
      <div v-show="navId === 2">
        <div class="search-box">
          <el-input size="small" prefix-icon="el-icon-search" placeholder="名字 技能 来源" v-model="chefFilter.chefKeyword">
          </el-input>
        </div>
        <el-table
          :data="chefsPage"
          style="width: 100%"
          ref='chefsTable'
          class="sort"
          @sort-change="handleChefSort"
          :height="tableHeight">
          <el-table-column fixed sortable="custom" prop="galleryId" label="No." width="63" v-if="chefCol.id"></el-table-column>
          <el-table-column fixed sortable="custom" prop="name" label="名字" width="67"></el-table-column>
          <el-table-column sortable="custom" prop="rarity_show" label="星" min-width="75" v-if="chefCol.rarity"></el-table-column>
          <el-table-column sortable="custom" prop="stirfry" label="炒" min-width="52" v-if="chefCol.skills"></el-table-column>
          <el-table-column sortable="custom" prop="boil" label="煮" min-width="52" v-if="chefCol.skills"></el-table-column>
          <el-table-column sortable="custom" prop="knife" label="切" min-width="52" v-if="chefCol.skills"></el-table-column>
          <el-table-column sortable="custom" prop="fry" label="炸" min-width="52" v-if="chefCol.skills"></el-table-column>
          <el-table-column sortable="custom" prop="bake" label="烤" min-width="52" v-if="chefCol.skills"></el-table-column>
          <el-table-column sortable="custom" prop="steam" label="蒸" min-width="52" v-if="chefCol.skills"></el-table-column>
          <el-table-column sortable="custom" prop="skill" label="技能" min-width="130" v-if="chefCol.skill"></el-table-column>
          <el-table-column sortable="custom" prop="meat" label="肉" min-width="52" v-if="chefCol.gather"></el-table-column>
          <el-table-column sortable="custom" prop="creation" label="面" min-width="52" v-if="chefCol.gather"></el-table-column>
          <el-table-column sortable="custom" prop="veg" label="菜" min-width="52" v-if="chefCol.gather"></el-table-column>
          <el-table-column sortable="custom" prop="fish" label="鱼" min-width="52" v-if="chefCol.gather"></el-table-column>
          <el-table-column sortable="custom" prop="sex" min-width="68" label="性别" v-if="chefCol.sex"></el-table-column>
          <el-table-column sortable="custom" prop="origin" label="来源" min-width="100" v-if="chefCol.origin"></el-table-column>
          <el-table-column sortable="custom" prop="ultimateGoal" label="修炼任务" min-width="150" v-if="chefCol.ultimateGoal"></el-table-column>
          <el-table-column sortable="custom" prop="ultimateSkillShow" label="修炼技能" min-width="130" v-if="chefCol.ultimateSkill"></el-table-column>
          <el-table-column label="" min-width="1"></el-table-column>
        </el-table>
        <div class="pagination">
          <el-pagination
            background
            small
            :page-size="chefsPageSize"
            :current-page.sync="chefsCurPage"
            @current-change="handleCurrentChange"
            :pager-count="5"
            layout="total, prev, pager, next"
            :total="chefs.length">
          </el-pagination>
        </div>
      </div>
      <div v-show="navId === 3">
        <div class="search-box">
          <el-input size="small" prefix-icon="el-icon-search" placeholder="名字 技能 来源" v-model="equipFilter.equipKeyword">
          </el-input>
        </div>
        <el-table
          :data="equipsPage"
          style="width: 100%"
          ref='equipsTable'
          class="sort"
          @sort-change="handleEquipSort"
          :height="tableHeight">
          <el-table-column fixed sortable="custom" prop="galleryId" label="No." width="63" v-if="equipCol.id"></el-table-column>
          <el-table-column fixed sortable="custom" prop="name" label="名字" width="80"></el-table-column>
          <el-table-column sortable="custom" prop="rarity_show" label="星" min-width="55" v-if="equipCol.rarity"></el-table-column>
          <el-table-column sortable="custom" prop="skill" label="技能" min-width="155" v-if="equipCol.skill"></el-table-column>
          <el-table-column sortable="custom" prop="origin" label="来源" min-width="100" v-if="equipCol.origin"></el-table-column>
          <el-table-column label="" min-width="1"></el-table-column>
        </el-table>
        <div class="pagination">
          <el-pagination
            background
            small
            :page-size="equipsPageSize"
            :current-page.sync="equipsCurPage"
            @current-change="handleCurrentChange"
            :pager-count="5"
            layout="total, prev, pager, next"
            :total="equips.length">
          </el-pagination>
        </div>
      </div>
      <div v-show="navId === 4">装修</div>
      <div v-show="navId === 5">采集</div>
      <div v-show="navId === 6">
        <div class="search-box">
          <el-input size="small" prefix-icon="el-icon-search" placeholder="编号 任务 奖励" v-model="questsKeyword" class="input-with-select">
            <el-select slot="prepend" v-model="questsType" placeholder="请选择任务类型" size="small">
              <el-option
                v-for="item in questsTypes"
                :key="item.value"
                :label="item.label"
                :value="item.value">
              </el-option>
            </el-select>
          </el-input>
        </div>
        <el-table
          :data="questsPage"
          style="width: 100%"
          :height="tableHeight"
          @sort-change="handleQuestsSort"
          ref="questsTable"
          >
          <el-table-column prop="questId" label="No." width="63" sortable='custom'></el-table-column>
          <el-table-column prop="preId" label="前置" width="50" v-if="questsType === 2"></el-table-column>
          <el-table-column prop="goal" label="任务"></el-table-column>
          <el-table-column prop="rewards_show" label="奖励" width="110"></el-table-column>
        </el-table>
      <div class="pagination">
        <el-pagination
          background
          small
          :page-size="questsPageSize"
          :current-page.sync="questsCurPage"
          @current-change="handleCurrentChange"
          :pager-count="5"
          layout="total, prev, pager, next"
          :total="questsType === 1 ? questsMain.length : questsRegional.length">
        </el-pagination>
      </div>
      </div>
      <div v-show="navId === 7">计算器</div>
      <div v-show="navId === 8">个人</div>
      <div v-show="navId === 9">说明</div>
    </section>
  </div>
</body>
<script src="./js/jquery-2.1.4.min.js"></script>
<script src="./js/vue.min.js"></script>
<script src="./ele/index.js"></script>
<script src="./js/index.js"></script>
</html>